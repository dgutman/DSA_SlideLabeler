
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<title>Emory QR Generator</title>


    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <style type="text/css">
		body { font-family: Helvetica, sans-serif; }
		h2, h3 { margin-top:0; }
		form { margin-top: 15px; }
		form > input { margin-right: 15px; }
		#results { float:right; margin:20px; padding:20px; border:1px solid; background:#ccc; }
	</style>
	
  </head>
  <body>
<div class="container">
    <div id="content">
        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
            <li class="active"><a href="#webcam_view" data-toggle="tab">WebCam Feed</a></li>
            <li><a href="#qr_view" data-toggle="tab">QR Data</a></li>
            <li><a href="#yellow" data-toggle="tab">Info</a></li>
        
        </ul>
        
        <div id="my-tab-content" class="tab-content">
            <div class="tab-pane active" id="webcam_view">
                
		<div id="results">Your captured image will appear here...</div>
	
		<h1>WebcamJS Test Page - Large Capture</h1>
		<h3>Demonstrates 640x480 large capture with 320x240 small display</h3>
	
		<div id="my_camera"></div>
<!-- A button for taking snaps -->
	<form>
		<input type=button value="Take Large Snapshot" onClick="take_snapshot()">
		<input type=button id="btn_proc_ img" value="Save Snapshot to Disk" onClick="process_image()">
	</form>
	

            </div>
            <div class="tab-pane" id="qr_view">
                <h1>Generated QR Code</h1>
                <p>QR Code generated</p>
                <div id="qr_img_info"></div>
                <div id="qr_img"></div>
            </div>
            <div class="tab-pane" id="yellow">
                <h1>How to use</h1>
                <p>This app should allow the user to scan a patient generator label to generate a Barcode we can read into other software</p>
            </div>
            
        </div>
    </div>
</div>

	


 
</div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
   
	
	<!-- First, include the Webcam.js JavaScript Library -->
	<script type="text/javascript" src="js/webcam.js"></script>
	
	<!-- Configure a few settings and attach camera -->
	<script language="JavaScript">
		Webcam.set({
			width: 320,
			height: 240,
			dest_width: 640,
			dest_height: 480,
			image_format: 'jpeg',
			jpeg_quality: 90
		});
		Webcam.attach( '#my_camera' );
	</script>
	
	
	<!-- Code to handle taking the snapshot and displaying it locally -->
	<script language="JavaScript">
		function take_snapshot() {
			// take snapshot and get image data
			Webcam.snap( function(data_uri) {
				// display results in page
				document.getElementById('results').innerHTML = 
					'<h2>Here is your large image:</h2>' + 
					'<img src="'+data_uri+'"/>';
			} );
		}

		function process_image()
			{
				//This will send the currently selected image back to the server for processing and regular expression generation i hope
				console.log('request sent?');
//				Webcam.send('/api/grab_snapshot')
    Webcam.snap( function(data_uri) {
        // snap complete, image data is in 'data_uri'

        Webcam.upload( data_uri, 'api/grab_snapshot', function(code, text) {
            // Upload complete!
            // 'code' will be the HTTP response code from the server, e.g. 200
            // 'text' will be the raw response content
            console.log('I SNAPPED UP');
            console.log(code,text);
            $("#qr_img_info").text('HI HOW ARE YOU');
            //Some CODE SHOULD GO HERE TO SHOW THE IMAGE
              $('.nav-tabs a[href="#qr_view"]').tab('show'); //Now switch to the QR CODE
        } );

    } );




			}

//Webcam.upload()	Upload a saved image to your server via binary AJAX. Fires progress events (see below).
// Webcam.on( 'load', function() {
//         // library is loaded
//     } );

//     Webcam.on( 'live', function() {
//         // camera is live, showing preview image
//         // (and user has allowed access)
//     } );

//     Webcam.on( 'error', function(err) {
//         // an error occurred (see 'err')
//     } );


	</script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

	  </body>
</html>
